<psk-page title="Home">
    <link rel="stylesheet" href="/assets/css/pages/trial-details.css">
    <webc-container controller="TrialDetailsController">

        <div class="main-background">
            <div class="front">

                <div class="top-container">
                    <div class="pharma-logo">
                        <psk-img class="ed-control-image" src="assets/images/pharmalogo.png"
                                 height='47' width='110'></psk-img>
                    </div>
                    <div>
                        <psk-label class="main-title">{{@trial.id}} {{@trial.name}}</psk-label>
                    </div>
                    <button class="logout-button" data-tag="logout">Logout</button>
                </div>

                <div class="subtitle-container">
                    <div data-if="@trial.recruitmentPeriod.toShowDate">
                        <div slot="true">
                            <psk-label class="subtitle">Recruitment period: {{@trial.recruitmentPeriod.toShowDate}}
                            </psk-label>
                        </div>
                        <div slot="false">
                            <psk-label class="subtitle">Recruitment period not set yet - Click edit to set it
                            </psk-label>
                        </div>
                    </div>
                    <button class="link-button" data-tag="edit-period">Edit Period</button>
                    <button class="add-ts" data-tag="add:ts">Add Trial Subject</button>
                </div>
                <div class="subtitle-container" data-if="@site.name">
                    <div slot="true">
                        <psk-label class="subtitle">{{@site.status}}
                        </psk-label>
                        <button class="link-button" data-tag="edit-status">Change Status</button>
                    </div>
                </div>

                <psk-label class="table-title">Trial Subjects</psk-label>
                <div class="trial-table">

                    <psk-layout columns="6" class="justify-content-center align-items-center table-row">

                        <psk-label class="table-cell-title">Planned</psk-label>
                        <psk-label class="table-cell-title">Screened</psk-label>
                        <psk-label class="table-cell-title">Enrolled</psk-label>
                        <psk-label class="table-cell-title">Percentage of enrollment</psk-label>
                        <psk-label class="table-cell-title">Withdrawed</psk-label>
                        <psk-label class="table-cell-title">Declined Trial</psk-label>

                    </psk-layout>
                    <hr/>
                </div>

                <div class="trial-table">
                    <psk-layout columns="6" class="justify-content-center align-items-center table-row">
                        <psk-label class="table-cell">{{@subjects.planned}}</psk-label>
                        <psk-label class="table-cell">{{@subjects.screened}}</psk-label>
                        <psk-label class="table-cell">{{@subjects.enrolled}}</psk-label>
                        <psk-label class="table-cell">{{@subjects.percentage}}</psk-label>
                        <psk-label class="table-cell">{{@subjects.withdrew}}</psk-label>
                        <psk-label class="table-cell">{{@subjects.declined}}</psk-label>

                    </psk-layout>
                </div>

                <hr>

                <div>
                    <label class="table-title">Consents (and versions released)</label>
                </div>
                <div class="trial-table econsent-and-versions-table">
                    <psk-layout columns="@econsentsSize" data-for="@econsents" class="justify-content-center table-row">
                        <div>
                            <psk-label class="table-cell-title">{{@name}} (Type: {{@type}})</psk-label>
                            <div data-for="@versions" class="version-row">
                                <hr>
                                <psk-label class="clickable" data-tag="navigate-to-version">
                                    {{@version}} - {{@versionDateAsString}}
                                </psk-label>
                            </div>
                        </div>
                    </psk-layout>
                </div>

                <button class="back-button" data-tag="back">Back</button>
            </div>

            <div class="eu-container">
                <div class="left-image-eu">
                    <psk-img class="ed-control-image" src="assets/images/flageu.png"
                             height='80' width='123'></psk-img>
                </div>
                <div class="right-text-eu">
                    <strong>
                        <psk-label class="eu-text">This project has received funding from the European Union’s Horizon
                            2020 research and innovation programme under <br/>
                            grant agreement No 853992 Copyright <br/>
                            <span>&copy;  PharmaLedger Consortium 2020 –2023</span>
                        </psk-label>
                    </strong>
                </div>

            </div>

        </div>
    </webc-container>
</psk-page>


